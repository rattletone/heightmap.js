(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self,a.Heightmap=b())})(this,function(){'use strict';function f(a){return Math.min(Math.max(a,0),1)}function*g(a){var b=Math.imul;let c;for(const d of a)c=1779033703^a.length,c=b(c^d.charCodeAt(0),3432918353),c=c<<13|c>>>19;for(;;)c=b(c^c>>>16,2246822507),c=b(c^c>>>13,3266489909),yield(c^=c>>>16)>>>0}function*h(e,f,g,h){let i=e,j=f,k=g,l=h;for(;;){let a;i>>>=0,j>>>=0,k>>>=0,l>>>=0,a=0|i+j,i=j^j>>>9,j=0|k+(k<<3),k=k<<21|k>>11,l=0|l+1,a=0|a+l,k=0|k+a,yield(a>>>0)/4294967296}}return class{static create(a,b){function i(a){return(l.next().value*2+-1)*a}if(isNaN(+a))throw new TypeError("\"iterations\" must be of type, or able to be converted to type, \"number\"");const j="string"==typeof b?b:Math.random().toString(36),k=g(j),l=h(k.next().value,k.next().value,k.next().value,k.next().value),m=Math.pow(2,a),n=[];for(let c=m+1;c--;)n[c]=[];n[0][0]=l.next().value,n[0][m]=l.next().value,n[m][0]=l.next().value,n[m][m]=l.next().value;let o=m,p=1;for(;1<o;){for(let e=0;e<m;e+=o)for(let g=0;g<m;g+=o){const h=n[e][g],a=n[e][g+o],b=n[e+o][g],c=n[e+o][g+o];n[e+o/2][g+o/2]=f((h+a+b+c)/4+i(p))}for(let g=0;g<m;g+=o)for(let h=0;h<m;h+=o){const j=n[g][h],a=n[g][h+o],b=n[g+o][h],c=n[g+o][h+o],d=n[g+o/2][h+o/2];n[g][h+o/2]=f((g?(n[g-o/2][h+o/2]+j+a+d)/4:(j+a+d)/3)+i(p)),n[g+o/2][h]=f((h?(n[g+o/2][h-o/2]+j+d+b)/4:(j+d+b)/3)+i(p)),n[g+o/2][h+o]=f((h+o<m?(n[g+o/2][h+o+o/2]+a+d+c)/4:(a+d+c)/3)+i(p)),n[g+o][h+o/2]=f((g+o<m?(n[g+o+o/2][h+o/2]+d+b+c)/4:(d+b+c)/3)+i(p))}o/=2,p/=2}return n}}});
